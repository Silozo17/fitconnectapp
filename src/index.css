/* Fonts are loaded via index.html with preload for better performance */

/* ========================================
   CIRCULAR STAT COMPONENTS - Premium Effects
   ======================================== */

/* Circular stat container with glass effect */
.circular-stat-glass {
  @apply relative;
  background: linear-gradient(135deg, 
    hsl(var(--card) / 0.6), 
    hsl(var(--card) / 0.4));
  @apply backdrop-blur-xl border border-border/30 rounded-2xl p-4;
  box-shadow: 
    0 4px 24px hsl(0 0% 0% / 0.2),
    inset 0 1px 0 hsl(0 0% 100% / 0.05);
}

/* Glow effect for circular progress */
.circular-stat-glow {
  filter: drop-shadow(0 0 8px var(--stat-glow-color, hsl(var(--primary) / 0.4)));
}

/* Animated glow pulse for near-goal states */
@keyframes circular-stat-pulse {
  0%, 100% { 
    filter: drop-shadow(0 0 6px var(--stat-glow-color, hsl(var(--primary) / 0.3)));
  }
  50% { 
    filter: drop-shadow(0 0 12px var(--stat-glow-color, hsl(var(--primary) / 0.6)));
  }
}

.circular-stat-pulse {
  animation: circular-stat-pulse 2s ease-in-out infinite;
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .circular-stat-pulse,
  .leaderboard-avatar-ring::before,
  .glow-orb,
  .glow-orb-purple,
  .blob,
  .pulse-glow,
  .float,
  .animate-shine,
  .animate-pulse-subtle,
  .animate-badge-shine {
    animation: none !important;
  }
}

/* Entry animation for circular stats */
@keyframes circular-stat-enter {
  0% {
    opacity: 0;
    transform: scale(0.8);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

.circular-stat-enter {
  animation: circular-stat-enter 0.5s ease-out forwards;
}

/* Value change animation - counter effect */
@keyframes circular-stat-value-pop {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

.circular-stat-value-change {
  animation: circular-stat-value-pop 0.3s ease-out;
}

/* Leaderboard Animated Gradient Rings */
@keyframes ring-glow-pulse {
  0%, 100% { opacity: 0.8; }
  50% { opacity: 1; }
}

@keyframes ring-rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.leaderboard-avatar-ring {
  position: relative;
  border-radius: 50%;
}

.leaderboard-avatar-ring::before {
  content: '';
  position: absolute;
  inset: -6px;
  border-radius: 50%;
  padding: 6px;
  background: conic-gradient(from 0deg, var(--ring-color-1), var(--ring-color-2), var(--ring-color-1));
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  animation: ring-rotate 4s linear infinite, ring-glow-pulse 2s ease-in-out infinite;
  /* Performance: Use GPU-accelerated properties */
  will-change: transform;
}

/* Pause animations when not visible (for mobile battery savings) */
@media (max-width: 768px) {
  .leaderboard-avatar-ring::before {
    animation-play-state: paused;
  }
  .leaderboard-avatar-ring:hover::before,
  .leaderboard-avatar-ring:focus-within::before {
    animation-play-state: running;
  }
}

.leaderboard-avatar-ring-gold {
  --ring-color-1: hsl(35, 100%, 55%);
  --ring-color-2: hsl(45, 100%, 65%);
  box-shadow: 
    0 0 20px 4px hsla(40, 100%, 55%, 0.4),
    0 0 40px 8px hsla(40, 100%, 55%, 0.2);
}

.leaderboard-avatar-ring-silver {
  --ring-color-1: hsl(220, 20%, 65%);
  --ring-color-2: hsl(220, 30%, 80%);
  box-shadow: 
    0 0 16px 3px hsla(220, 20%, 70%, 0.35),
    0 0 32px 6px hsla(220, 20%, 70%, 0.15);
}

.leaderboard-avatar-ring-bronze {
  --ring-color-1: hsl(25, 80%, 50%);
  --ring-color-2: hsl(35, 70%, 60%);
  box-shadow: 
    0 0 14px 3px hsla(30, 80%, 50%, 0.35),
    0 0 28px 5px hsla(30, 80%, 50%, 0.15);
}

/* Leaderboard Animations */
@keyframes leaderboard-podium-enter {
  0% {
    opacity: 0;
    transform: scale(0.8) translateY(20px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

@keyframes leaderboard-row-enter {
  0% {
    opacity: 0;
    transform: translateX(-20px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Documentation prose overrides - remove link underscoring */
.prose-docs a {
  @apply text-primary no-underline transition-colors;
}
.prose-docs a:hover {
  @apply text-primary/80;
}

@layer base {
  /* Prevent mobile browser zoom on form inputs - requires 16px minimum */
  @media screen and (max-width: 768px) {
    input, textarea, select {
      font-size: 16px !important;
    }
  }

  :root {
    /* Light mode - kept for accessibility but dark-first design */
    --background: 0 0% 100%;
    --foreground: 240 10% 4%;
    
    --card: 0 0% 98%;
    --card-foreground: 240 10% 4%;
    
    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 4%;
    
    --primary: 75 100% 45%;
    --primary-foreground: 240 10% 4%;
    
    --secondary: 240 5% 92%;
    --secondary-foreground: 240 10% 20%;
    
    --muted: 240 5% 92%;
    --muted-foreground: 240 5% 46%;
    
    --accent: 280 85% 60%;
    --accent-foreground: 0 0% 100%;
    
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 98%;
    
    --border: 240 5% 84%;
    --input: 240 5% 84%;
    --ring: 75 100% 45%;
    
    --radius: 0.75rem;
    
    --success: 158 64% 52%;
    --success-foreground: 0 0% 100%;
    
    --warning: 38 92% 50%;
    --warning-foreground: 240 10% 4%;

    /* Gradient colors - Energy palette */
    --gradient-lime: 75 100% 50%;
    --gradient-lime-dark: 75 80% 35%;
    --gradient-purple: 280 85% 60%;
    --gradient-violet: 260 80% 50%;
    --gradient-magenta: 300 85% 55%;
    --gradient-cyan: 180 100% 45%;

    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 10% 4%;
    --sidebar-primary: 75 100% 45%;
    --sidebar-primary-foreground: 240 10% 4%;
    --sidebar-accent: 240 5% 92%;
    --sidebar-accent-foreground: 240 10% 4%;
    --sidebar-border: 240 5% 84%;
    --sidebar-ring: 75 100% 45%;
  }

  .dark {
    /* Ultra dark background - like reference */
    --background: 240 15% 5%;
    --foreground: 0 0% 98%;
    
    --card: 240 12% 8%;
    --card-foreground: 0 0% 98%;
    
    --popover: 240 12% 8%;
    --popover-foreground: 0 0% 98%;
    
    /* Electric Lime Primary */
    --primary: 75 100% 50%;
    --primary-foreground: 240 15% 5%;
    
    --secondary: 240 12% 12%;
    --secondary-foreground: 0 0% 90%;
    
    --muted: 240 12% 15%;
    --muted-foreground: 240 5% 65%;
    
    /* Purple/Magenta Accent */
    --accent: 280 85% 60%;
    --accent-foreground: 0 0% 100%;
    
    --border: 240 12% 18%;
    --input: 240 12% 18%;
    --ring: 75 100% 50%;

    --sidebar-background: 240 15% 4%;
    --sidebar-foreground: 0 0% 98%;
    --sidebar-primary: 75 100% 50%;
    --sidebar-primary-foreground: 240 15% 5%;
    --sidebar-accent: 240 12% 12%;
    --sidebar-accent-foreground: 0 0% 98%;
    --sidebar-border: 240 12% 18%;
    --sidebar-ring: 75 100% 50%;
  }

  * {
    @apply border-border;
  }

  html {
    @apply dark;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: 'Inter', sans-serif;
  }

  /* Hide scrollbars on mobile globally */
  @media (max-width: 767px) {
    * {
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    *::-webkit-scrollbar {
      display: none;
    }
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: 'Space Grotesk', sans-serif;
  }
}

@layer components {
  /* ========================================
     PREMIUM UI SYSTEM - Foundation
     ======================================== */
  
  /* Safe Area Utilities - Device bezels */
  .safe-top {
    padding-top: env(safe-area-inset-top, 0px);
  }
  
  /* Native iOS override for safe-top - use Despia's runtime variable */
  html.native-ios .safe-top {
    padding-top: var(--safe-area-top, 59px);
  }
  
  /* Sidebar-specific safe area - reduced padding for native iOS */
  .safe-top-sidebar {
    padding-top: env(safe-area-inset-top, 0px);
  }
  
  html.native-ios .safe-top-sidebar {
    padding-top: calc(var(--safe-area-top, 59px) / 2);
  }
  
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }
  
  .safe-left {
    padding-left: env(safe-area-inset-left, 0px);
  }
  
  .safe-right {
    padding-right: env(safe-area-inset-right, 0px);
  }
  
  .safe-x {
    padding-left: env(safe-area-inset-left, 0px);
    padding-right: env(safe-area-inset-right, 0px);
  }
  
  .safe-y {
    padding-top: env(safe-area-inset-top, 0px);
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  /* Safe bottom padding for modal footers */
  .pb-safe-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  /* Edge-to-edge iOS immersive experience */
  .pt-safe-status {
    padding-top: env(safe-area-inset-top, 0px);
  }

  .mt-header-safe {
    margin-top: calc(4rem + env(safe-area-inset-top, 0px));
  }

  /* Native iOS fallback - use Despia's runtime CSS variable */
  /* Despia injects --safe-area-top with device-specific values (Dynamic Island, Notch, etc.) */
  /* Applied via JavaScript by adding .native-ios class to html element */
  html.native-ios .pt-safe-status {
    /* Use Despia's runtime value with 59px fallback for Dynamic Island */
    padding-top: var(--safe-area-top, 59px);
  }

  html.native-ios .mt-header-safe {
    /* 2.625rem (42px) base + Despia safe area */
    margin-top: calc(2.625rem + var(--safe-area-top, 59px));
  }

  /* Native iOS header content - reduced height for native app only */
  html.native-ios header > div:first-child {
    min-height: 42px !important;
  }

  /* ========================================
     GLASSMORPHISM EFFECTS - Premium Frost System
     ======================================== */
  
  /* Base glass - subtle frosted effect */
  .glass {
    background: hsl(var(--card) / 0.25);
    @apply backdrop-blur-2xl border border-border/30;
    box-shadow: 
      inset 0 1px 0 hsl(0 0% 100% / 0.1),
      inset 1px 0 0 hsl(0 0% 100% / 0.05);
  }

  .glass-dark {
    background: linear-gradient(135deg, 
      hsl(var(--card) / 0.4), 
      hsl(var(--card) / 0.25));
    @apply backdrop-blur-2xl border border-border/40;
    box-shadow: 
      0 4px 24px hsl(0 0% 0% / 0.3),
      inset 0 1px 0 hsl(0 0% 100% / 0.08),
      inset 1px 0 0 hsl(0 0% 100% / 0.04),
      inset 0 -1px 0 hsl(0 0% 0% / 0.15);
  }

  .glass-premium {
    background: linear-gradient(135deg, 
      hsl(var(--card) / 0.3), 
      hsl(var(--card) / 0.15));
    @apply backdrop-blur-3xl border border-border/25;
    box-shadow: 
      0 8px 32px hsl(0 0% 0% / 0.35),
      0 2px 8px hsl(0 0% 0% / 0.2),
      inset 0 1px 0 hsl(0 0% 100% / 0.12),
      inset 1px 0 0 hsl(0 0% 100% / 0.06),
      inset 0 -1px 0 hsl(0 0% 0% / 0.2),
      inset -1px 0 0 hsl(0 0% 0% / 0.1);
  }

  .glass-floating {
    background: linear-gradient(135deg, 
      hsl(var(--card) / 0.35), 
      hsl(var(--card) / 0.2));
    @apply backdrop-blur-3xl border border-border/30 rounded-3xl;
    box-shadow: 
      0 20px 60px hsl(0 0% 0% / 0.45),
      0 8px 24px hsl(0 0% 0% / 0.3),
      inset 0 1px 0 hsl(0 0% 100% / 0.15),
      inset 1px 0 0 hsl(0 0% 100% / 0.08),
      inset 0 -1px 0 hsl(0 0% 0% / 0.2),
      inset -1px 0 0 hsl(0 0% 0% / 0.1);
  }

  /* Primary glass card - TRUE frosted glass with edge highlights */
  .glass-card {
    background: linear-gradient(135deg, 
      hsl(var(--card) / 0.25), 
      hsl(var(--card) / 0.15));
    backdrop-filter: blur(40px) saturate(150%);
    -webkit-backdrop-filter: blur(40px) saturate(150%);
    @apply border border-border/20 rounded-2xl;
    box-shadow: 
      /* Outer shadow for depth */
      0 8px 32px hsl(0 0% 0% / 0.3),
      0 4px 12px hsl(0 0% 0% / 0.2),
      /* Top edge highlight - bright frost line */
      inset 0 1px 0 hsl(0 0% 100% / 0.12),
      /* Left edge highlight */
      inset 1px 0 0 hsl(0 0% 100% / 0.06),
      /* Bottom edge shadow */
      inset 0 -1px 0 hsl(0 0% 0% / 0.15),
      /* Right edge shadow */
      inset -1px 0 0 hsl(0 0% 0% / 0.08);
  }

  /* Elevated glass card - for interactive/prominent cards */
  .glass-card-elevated {
    isolation: isolate; /* Creates clean stacking context for backdrop-filter */
    background: linear-gradient(145deg, 
      hsl(var(--card) / 0.3), 
      hsl(var(--card) / 0.18));
    backdrop-filter: blur(48px) saturate(160%);
    -webkit-backdrop-filter: blur(48px) saturate(160%);
    @apply border border-border/25 rounded-2xl transition-all duration-300;
    box-shadow: 
      0 12px 40px hsl(0 0% 0% / 0.35),
      0 4px 16px hsl(0 0% 0% / 0.25),
      /* Brighter top highlight for premium feel */
      inset 0 1px 0 hsl(0 0% 100% / 0.15),
      inset 1px 0 0 hsl(0 0% 100% / 0.08),
      inset 0 -1px 0 hsl(0 0% 0% / 0.18),
      inset -1px 0 0 hsl(0 0% 0% / 0.1);
  }

  /* Carousel card internal dimming overlay - preserves backdrop-filter */
  .carousel-dim-overlay {
    position: relative;
  }
  
  .carousel-dim-overlay::after {
    content: '';
    position: absolute;
    inset: 0;
    background: hsl(var(--background) / var(--carousel-dim, 0));
    pointer-events: none;
    border-radius: inherit;
    transition: background 0.15s ease-out;
    z-index: 50;
  }

  .glass-card-elevated:hover {
    box-shadow: 
      0 16px 48px hsl(0 0% 0% / 0.4),
      0 6px 20px hsl(0 0% 0% / 0.3),
      0 0 0 1px hsl(var(--primary) / 0.15),
      inset 0 1px 0 hsl(0 0% 100% / 0.2),
      inset 1px 0 0 hsl(0 0% 100% / 0.1),
      inset 0 -1px 0 hsl(0 0% 0% / 0.15);
    transform: translateY(-2px);
  }

  /* Subtle glass - for nested elements */
  .glass-subtle {
    background: hsl(var(--card) / 0.2);
    backdrop-filter: blur(24px);
    -webkit-backdrop-filter: blur(24px);
    @apply border border-border/15 rounded-xl;
    box-shadow: 
      inset 0 1px 0 hsl(0 0% 100% / 0.06),
      inset 1px 0 0 hsl(0 0% 100% / 0.03);
  }

  /* Glass item - for list rows/items within glass cards */
  .glass-item {
    background: hsl(var(--card) / 0.15);
    @apply rounded-xl transition-colors;
  }

  .glass-item:hover {
    background: hsl(var(--card) / 0.25);
  }

  /* Backward compatibility alias - maps to glass-card-elevated */
  .card-elevated {
    background: linear-gradient(145deg, 
      hsl(var(--card) / 0.3), 
      hsl(var(--card) / 0.18));
    backdrop-filter: blur(48px) saturate(160%);
    -webkit-backdrop-filter: blur(48px) saturate(160%);
    @apply border border-border/25 rounded-2xl transition-all duration-300;
    box-shadow: 
      0 12px 40px hsl(0 0% 0% / 0.35),
      0 4px 16px hsl(0 0% 0% / 0.25),
      inset 0 1px 0 hsl(0 0% 100% / 0.15),
      inset 1px 0 0 hsl(0 0% 100% / 0.08),
      inset 0 -1px 0 hsl(0 0% 0% / 0.18),
      inset -1px 0 0 hsl(0 0% 0% / 0.1);
  }

  /* Interactive glass - for buttons/clickable elements */
  .glass-interactive {
    background: linear-gradient(135deg, 
      hsl(var(--card) / 0.25), 
      hsl(var(--card) / 0.15));
    backdrop-filter: blur(32px) saturate(140%);
    -webkit-backdrop-filter: blur(32px) saturate(140%);
    @apply border border-border/20 rounded-xl transition-all duration-200;
    box-shadow: 
      0 4px 16px hsl(0 0% 0% / 0.2),
      inset 0 1px 0 hsl(0 0% 100% / 0.1),
      inset 1px 0 0 hsl(0 0% 100% / 0.05);
  }

  .glass-interactive:hover {
    background: linear-gradient(135deg, 
      hsl(var(--card) / 0.35), 
      hsl(var(--card) / 0.2));
    border-color: hsl(var(--primary) / 0.25);
    box-shadow: 
      0 6px 24px hsl(0 0% 0% / 0.25),
      0 0 30px hsl(var(--primary) / 0.08),
      inset 0 1px 0 hsl(0 0% 100% / 0.15),
      inset 1px 0 0 hsl(0 0% 100% / 0.08);
  }

  .glass-interactive:active {
    transform: scale(0.98);
  }

  /* Navigation glass - for nav bars */
  .glass-nav {
    background: linear-gradient(180deg, 
      hsl(var(--card) / 0.35), 
      hsl(var(--card) / 0.25));
    backdrop-filter: blur(48px) saturate(150%);
    -webkit-backdrop-filter: blur(48px) saturate(150%);
    box-shadow: 
      0 4px 24px hsl(0 0% 0% / 0.3),
      inset 0 1px 0 hsl(0 0% 100% / 0.1),
      inset 0 -1px 0 hsl(var(--border) / 0.3);
  }

  /* ========================================
     AMBIENT BACKGROUND EFFECTS (Glow Orbs)
     ======================================== */
  
  /* Container for ambient orbs - add to page wrapper */
  .ambient-glow-container {
    @apply fixed inset-0 overflow-hidden pointer-events-none;
    z-index: 0;
  }

  /* Green orb - primary accent */
  .glow-orb {
    @apply absolute rounded-full;
    background: radial-gradient(circle, 
      hsl(var(--gradient-lime) / 0.15) 0%, 
      hsl(var(--gradient-lime) / 0.05) 40%,
      transparent 70%);
    filter: blur(60px);
    animation: orb-float 8s ease-in-out infinite;
  }

  .glow-orb-sm {
    width: 200px;
    height: 200px;
  }

  .glow-orb-md {
    width: 350px;
    height: 350px;
  }

  .glow-orb-lg {
    width: 500px;
    height: 500px;
  }

  /* Purple orb - accent */
  .glow-orb-purple {
    @apply absolute rounded-full;
    background: radial-gradient(circle, 
      hsl(var(--gradient-purple) / 0.12) 0%, 
      hsl(var(--gradient-purple) / 0.04) 40%,
      transparent 70%);
    filter: blur(80px);
    animation: orb-float-alt 10s ease-in-out infinite;
  }

  @keyframes orb-float {
    0%, 100% { transform: translate(0, 0) scale(1); }
    33% { transform: translate(30px, -20px) scale(1.05); }
    66% { transform: translate(-20px, 15px) scale(0.95); }
  }

  @keyframes orb-float-alt {
    0%, 100% { transform: translate(0, 0) scale(1); }
    50% { transform: translate(-25px, 25px) scale(1.08); }
  }

  /* Disable background orb animations on mobile for battery savings */
  @media (max-width: 768px) {
    .glow-orb,
    .glow-orb-purple {
      animation: none;
    }
  }

  /* ========================================
     GRADIENT TEXT UTILITIES
     ======================================== */
  .gradient-text {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(135deg, hsl(var(--gradient-lime)) 0%, hsl(var(--gradient-cyan)) 100%);
  }

  .gradient-text-energy {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(135deg, hsl(var(--gradient-lime)) 0%, hsl(var(--gradient-purple)) 100%);
  }

  .gradient-text-purple {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(135deg, hsl(var(--gradient-purple)) 0%, hsl(var(--gradient-magenta)) 100%);
  }

  /* ========================================
     GRADIENT BACKGROUNDS
     ======================================== */
  .gradient-bg-primary {
    background: linear-gradient(135deg, hsl(var(--gradient-lime)) 0%, hsl(var(--gradient-lime-dark)) 100%);
  }

  .gradient-bg-energy {
    background: linear-gradient(135deg, hsl(var(--gradient-lime)) 0%, hsl(var(--gradient-cyan)) 100%);
  }

  .gradient-bg-purple {
    background: linear-gradient(135deg, hsl(var(--gradient-purple)) 0%, hsl(var(--gradient-violet)) 100%);
  }

  .gradient-bg-hero {
    background: 
      radial-gradient(ellipse 80% 50% at 50% -20%, hsl(var(--gradient-purple) / 0.15) 0%, transparent 50%),
      radial-gradient(ellipse 60% 40% at 80% 100%, hsl(var(--gradient-lime) / 0.08) 0%, transparent 50%),
      hsl(var(--background));
  }

  /* Premium curved header background */
  .gradient-header {
    background: linear-gradient(180deg, 
      hsl(var(--gradient-purple) / 0.15) 0%,
      hsl(var(--gradient-lime) / 0.05) 50%,
      transparent 100%);
  }

  .gradient-header-curved {
    background: linear-gradient(180deg, 
      hsl(var(--card)) 0%,
      hsl(var(--background)) 100%);
    clip-path: ellipse(120% 100% at 50% 0%);
  }

  /* ========================================
     GLOW EFFECTS
     ======================================== */
  .glow-lime {
    box-shadow: 
      0 0 20px hsl(var(--gradient-lime) / 0.4),
      0 0 40px hsl(var(--gradient-lime) / 0.2),
      0 0 60px hsl(var(--gradient-lime) / 0.1);
  }

  .glow-purple {
    box-shadow: 
      0 0 30px hsl(var(--gradient-purple) / 0.3),
      0 0 60px hsl(var(--gradient-purple) / 0.15);
  }

  .glow-sm {
    box-shadow: 0 0 15px hsl(var(--gradient-lime) / 0.3);
  }

  /* ========================================
     PREMIUM CARD STYLES
     ======================================== */
  .card-elevated {
    @apply bg-card border border-border rounded-2xl;
    box-shadow: 
      0 4px 24px hsl(0 0% 0% / 0.2),
      0 0 0 1px hsl(var(--border) / 0.5);
  }

  .card-elevated:hover {
    box-shadow: 
      0 12px 40px hsl(0 0% 0% / 0.3),
      0 0 30px hsl(var(--gradient-purple) / 0.1);
  }

  .card-floating {
    @apply bg-card border border-border/50 rounded-3xl;
    box-shadow: 
      0 20px 60px hsl(0 0% 0% / 0.35),
      0 8px 24px hsl(0 0% 0% / 0.2),
      inset 0 1px 0 hsl(0 0% 100% / 0.05);
  }

  .card-floating:hover {
    transform: translateY(-4px);
    box-shadow: 
      0 28px 70px hsl(0 0% 0% / 0.4),
      0 12px 32px hsl(0 0% 0% / 0.25),
      0 0 40px hsl(var(--gradient-lime) / 0.08);
  }

  .card-glass {
    background: linear-gradient(135deg, 
      hsl(var(--card) / 0.8), 
      hsl(var(--card) / 0.6));
    @apply backdrop-blur-xl border border-border/30 rounded-2xl;
    box-shadow: 
      0 8px 32px hsl(0 0% 0% / 0.25),
      inset 0 1px 0 hsl(0 0% 100% / 0.05);
  }

  .card-glow {
    @apply bg-card border border-border rounded-2xl transition-all duration-300;
  }

  .card-glow:hover {
    border-color: hsl(var(--gradient-lime) / 0.3);
    box-shadow: 
      0 0 30px hsl(var(--gradient-lime) / 0.1),
      0 0 60px hsl(var(--gradient-purple) / 0.05);
  }

  /* Icon square backgrounds - like reference images */
  .icon-square {
    @apply flex items-center justify-center rounded-2xl;
    width: 56px;
    height: 56px;
  }

  .icon-square-sm {
    @apply flex items-center justify-center rounded-xl;
    width: 44px;
    height: 44px;
  }

  .icon-square-lg {
    @apply flex items-center justify-center rounded-2xl;
    width: 64px;
    height: 64px;
  }

  /* ========================================
     HOVER EFFECTS
     ======================================== */
  .hover-lift {
    @apply transition-all duration-300;
  }

  .hover-lift:hover {
    @apply -translate-y-1 z-10;
  }

  /* Container for hover-lift items - prevents clipping */
  .hover-lift-container {
    @apply py-4 overflow-visible;
  }

  .hover-scale {
    @apply transition-transform duration-200;
  }

  .hover-scale:hover {
    @apply scale-[1.02];
  }

  .hover-glow:hover {
    box-shadow: 0 0 20px hsl(var(--gradient-lime) / 0.3);
  }

  /* Press effect for buttons */
  .press-scale {
    @apply transition-transform duration-100;
  }

  .press-scale:active {
    @apply scale-[0.97];
  }

  /* ========================================
     MICRO-INTERACTIONS & FEEDBACK
     ======================================== */
  
  /* Tap highlight for mobile */
  .tap-highlight {
    @apply relative overflow-hidden;
    -webkit-tap-highlight-color: transparent;
  }

  .tap-highlight::after {
    content: '';
    @apply absolute inset-0 opacity-0 transition-opacity duration-200;
    background: radial-gradient(circle at var(--tap-x, 50%) var(--tap-y, 50%), 
      hsl(var(--primary) / 0.15) 0%, 
      transparent 60%);
  }

  .tap-highlight:active::after {
    @apply opacity-100;
  }

  /* Spring bounce effect */
  .spring-bounce {
    @apply transition-transform;
    transition-timing-function: cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .spring-bounce:active {
    transform: scale(0.95);
  }

  /* Smooth active state */
  .active-shrink {
    @apply transition-transform duration-150;
  }

  .active-shrink:active {
    transform: scale(0.97);
  }

  /* ========================================
     SECTION DIVIDERS
     ======================================== */
  
  .section-divider {
    @apply h-px w-full;
    background: linear-gradient(90deg, 
      transparent 0%, 
      hsl(var(--border) / 0.5) 20%, 
      hsl(var(--border) / 0.5) 80%, 
      transparent 100%);
  }

  .section-divider-glow {
    @apply h-px w-full;
    background: linear-gradient(90deg, 
      transparent 0%, 
      hsl(var(--primary) / 0.2) 20%, 
      hsl(var(--primary) / 0.4) 50%,
      hsl(var(--primary) / 0.2) 80%, 
      transparent 100%);
    box-shadow: 0 0 8px hsl(var(--primary) / 0.3);
  }

  .section-divider-subtle {
    @apply h-px w-full bg-border/30;
  }

  /* ========================================
     GRADIENT BORDER
     ======================================== */
  .gradient-border {
    position: relative;
    background: hsl(var(--card));
    border-radius: var(--radius);
  }

  .gradient-border::before {
    content: '';
    position: absolute;
    inset: 0;
    padding: 2px;
    border-radius: inherit;
    background: linear-gradient(135deg, hsl(var(--gradient-lime)), hsl(var(--gradient-purple)), hsl(var(--gradient-cyan)));
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
  }

  /* ========================================
     DECORATIVE PATTERNS
     ======================================== */
  .dotted-circle {
    border: 2px dashed hsl(var(--gradient-lime) / 0.3);
    border-radius: 50%;
  }

  .dotted-pattern {
    background-image: radial-gradient(hsl(var(--gradient-lime) / 0.2) 1px, transparent 1px);
    background-size: 20px 20px;
  }

  /* ========================================
     ANIMATIONS
     ======================================== */
  .blob {
    border-radius: 42% 58% 70% 30% / 45% 45% 55% 55%;
    animation: blob-morph 8s ease-in-out infinite;
  }

  @keyframes blob-morph {
    0%, 100% {
      border-radius: 42% 58% 70% 30% / 45% 45% 55% 55%;
    }
    25% {
      border-radius: 45% 55% 65% 35% / 50% 40% 60% 50%;
    }
    50% {
      border-radius: 50% 50% 60% 40% / 55% 45% 55% 45%;
    }
    75% {
      border-radius: 48% 52% 55% 45% / 40% 55% 45% 55%;
    }
  }

  @keyframes pulse-glow {
    0%, 100% {
      box-shadow: 0 0 15px hsl(var(--gradient-lime) / 0.3);
    }
    50% {
      box-shadow: 0 0 25px hsl(var(--gradient-lime) / 0.5);
    }
  }

  .pulse-glow {
    animation: pulse-glow 2s ease-in-out infinite;
  }

  @keyframes float {
    0%, 100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  .float {
    animation: float 3s ease-in-out infinite;
  }

  /* Neon text */
  .neon-text {
    text-shadow: 
      0 0 10px hsl(var(--gradient-lime) / 0.5),
      0 0 20px hsl(var(--gradient-lime) / 0.3),
      0 0 30px hsl(var(--gradient-lime) / 0.2);
  }

  /* Badge styles */
  .badge-lime {
    @apply bg-primary/10 text-primary border border-primary/20;
  }

  .badge-purple {
    @apply bg-accent/10 text-accent border border-accent/20;
  }

  /* ========================================
     BLOG PROSE STYLES
     ======================================== */
  .prose-blog {
    @apply prose prose-lg prose-invert max-w-none;
    
    --tw-prose-headings: hsl(var(--foreground));
    --tw-prose-body: hsl(var(--muted-foreground));
    --tw-prose-bold: hsl(var(--foreground));
    --tw-prose-links: hsl(var(--primary));
    --tw-prose-bullets: hsl(var(--primary));
    --tw-prose-counters: hsl(var(--primary));
    --tw-prose-quotes: hsl(var(--muted-foreground));
    --tw-prose-quote-borders: hsl(var(--primary));
    --tw-prose-code: hsl(var(--foreground));
    --tw-prose-hr: hsl(var(--border));
  }

  .prose-blog h2 {
    @apply font-display text-2xl sm:text-3xl font-bold mt-12 mb-6 text-foreground;
    scroll-margin-top: 6rem;
  }

  .prose-blog h3 {
    @apply font-display text-xl sm:text-2xl font-semibold mt-8 mb-4 text-foreground;
  }

  .prose-blog p {
    @apply text-muted-foreground leading-relaxed mb-6;
  }

  .prose-blog ul,
  .prose-blog ol {
    @apply my-6 space-y-3;
  }

  .prose-blog li {
    @apply text-muted-foreground pl-2;
  }

  .prose-blog li::marker {
    @apply text-primary;
  }

  .prose-blog strong {
    @apply text-foreground font-semibold;
  }

  .prose-blog blockquote {
    @apply border-l-4 border-primary pl-6 py-2 my-8 italic bg-primary/5 rounded-r-lg;
  }

  .prose-blog blockquote p {
    @apply text-foreground/80 mb-0;
  }

  .prose-blog a {
    @apply text-primary hover:text-primary/80 underline underline-offset-4 transition-colors;
  }

  .prose-blog img {
    @apply rounded-xl my-8 shadow-lg;
  }

  .prose-blog hr {
    @apply border-border my-12;
  }

  .prose-blog code {
    @apply bg-muted px-2 py-1 rounded text-sm font-mono text-foreground;
  }

  .prose-blog pre {
    @apply bg-muted p-4 rounded-lg overflow-x-auto my-6;
  }

  .prose-blog pre code {
    @apply bg-transparent p-0;
  }
}

/* UX Polish - Focus states */
@layer utilities {
  /* Mobile bottom nav safe spacing - single source of truth */
  .pb-mobile-nav {
    padding-bottom: calc(8rem + env(safe-area-inset-bottom, 0px));
  }

  /* Only apply full spacing on mobile (< 768px), desktop gets standard spacing */
  @media (min-width: 768px) {
    .pb-mobile-nav {
      padding-bottom: 1.5rem;
    }
  }

  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-background;
  }

  /* Smooth page transitions */
  .page-transition {
    @apply animate-fade-in;
  }

  /* Stagger children animations */
  .stagger-children > * {
    @apply animate-fade-in opacity-0;
  }
  .stagger-children > *:nth-child(1) { animation-delay: 0ms; }
  .stagger-children > *:nth-child(2) { animation-delay: 50ms; }
  .stagger-children > *:nth-child(3) { animation-delay: 100ms; }
  .stagger-children > *:nth-child(4) { animation-delay: 150ms; }
  .stagger-children > *:nth-child(5) { animation-delay: 200ms; }
  .stagger-children > *:nth-child(6) { animation-delay: 250ms; }

  /* Interactive feedback */
  .press-effect {
    @apply transition-transform active:scale-[0.98];
  }

  /* Skeleton shimmer effect - optimized for GPU */
  .skeleton-shimmer {
    @apply relative overflow-hidden bg-muted;
  }
  
  .skeleton-shimmer::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      90deg,
      transparent 0%,
      hsl(var(--muted-foreground) / 0.08) 50%,
      transparent 100%
    );
    transform: translateX(-100%);
    animation: shimmer-optimized 1.5s infinite;
    will-change: transform;
  }
  
  @keyframes shimmer-optimized {
    100% {
      transform: translateX(100%);
    }
  }
  
  @media (prefers-reduced-motion: reduce) {
    .skeleton-shimmer::after {
      animation: none;
    }
  }

  /* Consistent card hover states */
  .card-interactive {
    @apply transition-all duration-200 hover:shadow-md hover:border-border/80;
  }

  /* Consistent list item hover states */
  .list-item-interactive {
    @apply transition-colors duration-150 hover:bg-muted/50 cursor-pointer;
  }

  /* Consistent button group spacing */
  .button-group {
    @apply flex items-center gap-2;
  }

  .button-group-vertical {
    @apply flex flex-col gap-2;
  }

  /* Consistent form field spacing */
  .form-field-group {
    @apply space-y-4;
  }

  /* Consistent section spacing */
  .section-spacing {
    @apply space-y-6;
  }

  /* Content max-width for readability */
  .content-max-width {
    @apply max-w-3xl;
  }

  /* Truncate with ellipsis for multiple lines */
  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Consistent grid layouts */
  .grid-auto-fit {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1rem;
  }

  .grid-auto-fill {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1rem;
  }

  /* Smooth scroll behavior */
  .scroll-smooth {
    scroll-behavior: smooth;
  }

  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Horizontal scroll with snap */
  .scroll-snap-x {
    @apply overflow-x-auto scrollbar-hide;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
  }

  .scroll-snap-item {
    scroll-snap-align: start;
    flex-shrink: 0;
  }

  /* Responsive text utilities */
  .text-balance {
    text-wrap: balance;
  }

  .text-pretty {
    text-wrap: pretty;
  }
}

/* Dark mode date/time picker icons - make calendar/clock icons visible */
.dark input[type="date"]::-webkit-calendar-picker-indicator,
.dark input[type="time"]::-webkit-calendar-picker-indicator,
.dark input[type="datetime-local"]::-webkit-calendar-picker-indicator {
  filter: invert(0.8) brightness(1.2);
  cursor: pointer;
}

/* Firefox/Safari color scheme for dark mode date inputs */
.dark input[type="date"],
.dark input[type="time"],
.dark input[type="datetime-local"] {
  color-scheme: dark;
}

/* Badge claim animations */
@keyframes shine {
  0% { transform: translateX(-200%); }
  100% { transform: translateX(200%); }
}

@keyframes pulse-subtle {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.9; transform: scale(1.02); }
}

@keyframes badge-shine {
  0%, 100% { box-shadow: inherit; }
  50% { filter: brightness(1.1); }
}

.animate-shine {
  animation: shine 2s linear infinite;
}

.animate-pulse-subtle {
  animation: pulse-subtle 2s ease-in-out infinite;
}

.animate-badge-shine {
  animation: badge-shine 2s ease-in-out infinite;
}

/* Touch-friendly scroll area for modals and popovers */
.touch-scroll-area {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* ========================================
   PERFORMANCE OPTIMIZATIONS
   ======================================== */

/* CSS Containment for list items - reduces layout recalculation */
.coach-card-container,
.message-item-container,
.notification-item-container {
  contain: layout style paint;
}

/* Dashboard widgets - content-visibility for off-screen rendering optimization */
.dashboard-widget {
  content-visibility: auto;
  contain-intrinsic-size: auto 200px;
}

/* Touch action optimization - eliminates 300ms delay */
.touch-scroll-optimized {
  touch-action: pan-y;
  overscroll-behavior-y: contain;
  -webkit-overflow-scrolling: touch;
}

/* Horizontal scrolling containers */
.touch-scroll-x {
  touch-action: pan-x;
  overscroll-behavior-x: contain;
  -webkit-overflow-scrolling: touch;
}

/* GPU-accelerated transitions - use specific properties instead of 'all' */
.transition-gpu {
  transition-property: transform, opacity;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 200ms;
  will-change: transform, opacity;
}

/* Hover lift effect optimized for GPU */
.hover-lift-gpu {
  transition: transform 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

.hover-lift-gpu:hover {
  transform: translateY(-2px);
}

/* Card shadow transition using pseudo-element for GPU acceleration */
.card-shadow-gpu {
  position: relative;
}

.card-shadow-gpu::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  opacity: 0;
  transition: opacity 200ms ease-out;
  box-shadow: 0 12px 40px hsl(0 0% 0% / 0.35);
  pointer-events: none;
}

.card-shadow-gpu:hover::before {
  opacity: 1;
}

/* Scroll snap optimization for carousels */
.scroll-snap-container {
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  touch-action: pan-x;
  overscroll-behavior-x: contain;
}

.scroll-snap-item {
  scroll-snap-align: start;
  scroll-snap-stop: normal;
}

/* Performance class for heavy components */
.perf-contain {
  contain: layout style;
}

/* Lazy loading placeholder */
.lazy-image-placeholder {
  background: hsl(var(--muted));
  aspect-ratio: inherit;
}
